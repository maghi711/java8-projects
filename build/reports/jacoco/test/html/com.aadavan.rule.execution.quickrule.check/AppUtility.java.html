<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AppUtility.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">java8-projects</a> &gt; <a href="index.source.html" class="el_package">com.aadavan.rule.execution.quickrule.check</a> &gt; <span class="el_source">AppUtility.java</span></div><h1>AppUtility.java</h1><pre class="source lang-java linenums">package com.aadavan.rule.execution.quickrule.check;

import java.io.PrintWriter;
import java.io.StringWriter;
import java.math.BigInteger;
import java.security.SecureRandom;
import java.sql.*;
import java.text.Format;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.text.StringCharacterIterator;
import java.time.*;
import java.util.Date;
import java.util.*;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.TimeUnit;
import java.util.logging.Logger;

//import java.util.concurrent.CopyOnWriteArrayList;


//import com.enstage.sas.accosaeas.common.geoip.IpToCountry;
//import org.apache.commons.collections.HashBag;

<span class="nc" id="L25">public class AppUtility {</span>
<span class="nc" id="L26">	private static final Logger logger = Logger.getLogger(AppUtility.class.getName());</span>

<span class="nc" id="L28">	private static String appRoot = System.getProperty(&quot;ACCOSA_APP_ROOT&quot;);</span>
	private static SecureRandom srandom;
	private static Random random;

	static {
<span class="nc bnc" id="L33" title="All 2 branches missed.">		if (appRoot == null) {</span>
<span class="nc" id="L34">			appRoot = &quot;d:/&quot;;</span>
		}

		try {
<span class="nc" id="L38">			random = new Random();</span>
<span class="nc" id="L39">			srandom = SecureRandom.getInstance(&quot;SHA1PRNG&quot;);</span>
<span class="nc" id="L40">		} catch (Exception e) {</span>
<span class="nc" id="L41">			logger.warning(&quot;Error 1:&quot;+AppUtility.getStackTrace(e));</span>
			
<span class="nc" id="L43">		} catch (Error e) {</span>
<span class="nc" id="L44">			logger.warning(&quot;Error 2:&quot;+AppUtility.getStackTrace(e));</span>
<span class="nc" id="L45">		}</span>

		/*HikariConfig config = new HikariConfig();
		config.setJdbcUrl(&quot;jdbc:mysql://192.168.106.69:3306/csr_trident&quot;);
		config.setUsername(&quot;root&quot;);
		config.setPassword(&quot;root&quot;);
		config.addDataSourceProperty(&quot;cachePrepStmts&quot;, &quot;true&quot;);
		config.addDataSourceProperty(&quot;prepStmtCacheSize&quot;, &quot;250&quot;);
		config.addDataSourceProperty(&quot;prepStmtCacheSqlLimit&quot;, &quot;2048&quot;);
		
		
		if(ds == null){
			ds = new HikariDataSource(config);
			logger.info(&quot;******* Mysql DS initialized via HikariDataSource*******&quot;);
		}	*/
	}

	public static String getCompleteFilePathX(String relaviePath) {
<span class="nc bnc" id="L63" title="All 2 branches missed.">		if (relaviePath == null) {</span>
<span class="nc" id="L64">			return relaviePath;</span>
		}

<span class="nc" id="L67">		return appRoot + relaviePath;</span>
	}

	public static boolean isInteger(String argument){
		try {
<span class="nc" id="L72">			Integer.parseInt(argument);</span>
<span class="nc" id="L73">			return true;</span>
<span class="nc" id="L74">		} catch (Exception e) {</span>
		
		}
<span class="nc" id="L77">		return false;</span>
	}
	
	
	public static boolean isLong(String argument){
		try {
<span class="nc" id="L83">			Long.parseLong(argument);</span>
<span class="nc" id="L84">			return true;</span>
<span class="nc" id="L85">		} catch (Exception e) {</span>
		
		}
<span class="nc" id="L88">		return false;</span>
	}
	
	public static String currentMethod() {		
<span class="nc" id="L92">		String methodName = Thread.currentThread().getStackTrace()[2].getMethodName();</span>
<span class="nc" id="L93">		return methodName;</span>
	}

	public static String getStackTrace(Throwable e) {
<span class="nc" id="L97">		StringWriter writer = new StringWriter(1024);</span>
<span class="nc" id="L98">		e.printStackTrace(new PrintWriter(writer));</span>
<span class="nc" id="L99">		String stackTrace = writer.toString();</span>
<span class="nc" id="L100">		return stackTrace;</span>
	}

	public static String escapeSpecialCharacters(String xml) {
<span class="nc" id="L104">		String escapedString = &quot;&quot;;</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">		if (xml == null) {</span>
<span class="nc" id="L106">			return &quot;&quot;;</span>
		}
<span class="nc bnc" id="L108" title="All 2 branches missed.">		if (xml.trim().equals(&quot;&quot;)) {</span>
<span class="nc" id="L109">			return &quot;&quot;;</span>
		}
<span class="nc" id="L111">		escapedString = replaceString(xml, &quot;&amp;&quot;, &quot;&amp;amp;&quot;);</span>
<span class="nc" id="L112">		escapedString = replaceString(escapedString, &quot;'&quot;, &quot;&amp;apos;&quot;);</span>
<span class="nc" id="L113">		escapedString = replaceString(escapedString, &quot;\&quot;&quot;, &quot;&amp;quot;&quot;);</span>
<span class="nc" id="L114">		escapedString = replaceString(escapedString, &quot;&lt;&quot;, &quot;&amp;lt;&quot;);</span>
<span class="nc" id="L115">		escapedString = replaceString(escapedString, &quot;&gt;&quot;, &quot;&amp;gt;&quot;);</span>
<span class="nc" id="L116">		return escapedString;</span>
	}

	public static String replaceString(String str, String str1, String str2) {
<span class="nc bnc" id="L120" title="All 2 branches missed.">		if (str == null) {</span>
<span class="nc" id="L121">			return null;</span>
		}
<span class="nc bnc" id="L123" title="All 2 branches missed.">		if (str1 == null) {</span>
<span class="nc" id="L124">			return str;</span>
		}
<span class="nc bnc" id="L126" title="All 2 branches missed.">		if (str2 == null) {</span>
<span class="nc" id="L127">			return str;</span>
		}
<span class="nc" id="L129">		StringBuilder sbStr = new StringBuilder(str);</span>
<span class="nc" id="L130">		int str1length = str1.length();</span>
<span class="nc" id="L131">		int str2length = str2.length();</span>
<span class="nc" id="L132">		int index = 0;</span>
<span class="nc" id="L133">		int fromIndex = -1;</span>
<span class="nc" id="L134">		index = sbStr.toString().indexOf(str1, fromIndex);</span>
<span class="nc bnc" id="L135" title="All 2 branches missed.">		while (index &gt;= 0) {</span>
<span class="nc" id="L136">			sbStr.replace(index, index + str1length, str2);</span>
<span class="nc" id="L137">			fromIndex = index + str2length;</span>
<span class="nc bnc" id="L138" title="All 2 branches missed.">			if (fromIndex &lt;= sbStr.length()) {</span>
<span class="nc" id="L139">				index = sbStr.toString().indexOf(str1, fromIndex);</span>
			} else {
<span class="nc" id="L141">				index = -1;</span>
			}
		}
<span class="nc" id="L144">		return sbStr.toString();</span>
	}
<span class="nc" id="L146">	private static Map sdfMap = new HashMap();</span>

	public static String makeDate(Date date, String format) {
<span class="nc bnc" id="L149" title="All 2 branches missed.">		if (format == null) {</span>
<span class="nc" id="L150">			format = &quot;yyMMdd HH:mm:ss&quot;;</span>
		}
<span class="nc bnc" id="L152" title="All 2 branches missed.">		if (date == null) {</span>
<span class="nc" id="L153">			date = new Date();</span>
		}

<span class="nc" id="L156">		SimpleDateFormat sdf = (SimpleDateFormat) sdfMap.get(format);</span>
<span class="nc bnc" id="L157" title="All 2 branches missed.">		if (sdf == null) {</span>
<span class="nc" id="L158">			new SimpleDateFormat(format);</span>
<span class="nc" id="L159">			sdf.setLenient(false);</span>
			//sdf.setTimeZone(TimeZone.getTimeZone(&quot;GMT+00:00&quot;));
<span class="nc" id="L161">			sdfMap.put(format, sdf);</span>
		}
<span class="nc" id="L163">		String txTime = null;</span>
		try {
<span class="nc" id="L165">			txTime = sdf.format(date);</span>
<span class="nc" id="L166">		} catch (Exception e) {</span>
<span class="nc" id="L167">			txTime = &quot;&quot;;</span>
<span class="nc" id="L168">		}</span>
		//logger.debug(&quot;date sent[&quot;+format+&quot;] : &quot; + txTime);
<span class="nc" id="L170">		return txTime;</span>
	}

	public static String caseConvert(String inputString) {
<span class="nc bnc" id="L174" title="All 4 branches missed.">		if (inputString != null &amp;&amp; inputString.trim().equals(&quot;&quot;) == false) {</span>
			String outputString;
			String result;
<span class="nc" id="L177">			StringTokenizer st = new StringTokenizer(inputString, &quot; &quot;);</span>
<span class="nc" id="L178">			StringBuilder stb = new StringBuilder();</span>
<span class="nc bnc" id="L179" title="All 2 branches missed.">			while (st.hasMoreElements()) {</span>
<span class="nc" id="L180">				result = st.nextToken();</span>
<span class="nc" id="L181">				stb.append((result.charAt(0) + &quot;&quot;).toUpperCase()</span>
<span class="nc" id="L182">						+ (result.substring(1, result.length())).toLowerCase() + &quot; &quot;);</span>
			}
<span class="nc" id="L184">			return stb.toString().trim();</span>
		} else {
<span class="nc" id="L186">			return &quot;&quot;;</span>
		}
	}

	public static Date rollMonth(Date date, int roll) throws Exception {
<span class="nc" id="L191">		GregorianCalendar gc = new GregorianCalendar();</span>
<span class="nc" id="L192">		gc.setTime(date);</span>

<span class="nc" id="L194">		boolean forward = true;</span>
<span class="nc bnc" id="L195" title="All 2 branches missed.">		if (roll &lt; 0) {</span>
<span class="nc" id="L196">			forward = false;</span>
		}

<span class="nc" id="L199">		GregorianCalendar newgc = (GregorianCalendar) gc.clone();</span>
		while (true) {
<span class="nc bnc" id="L201" title="All 2 branches missed.">			if (forward) {</span>
<span class="nc" id="L202">				newgc.roll(Calendar.MONTH , roll);</span>
<span class="nc bnc" id="L203" title="All 2 branches missed.">				if (gc.before(newgc) == false) {</span>
<span class="nc" id="L204">					newgc.roll(Calendar.YEAR, 1);</span>
<span class="nc" id="L205">					gc = (GregorianCalendar) newgc.clone();</span>
				}
				break;
			} else {
<span class="nc" id="L209">				newgc.roll(Calendar.MONTH, roll);</span>
<span class="nc bnc" id="L210" title="All 2 branches missed.">				if (gc.after(newgc) == false) {</span>
<span class="nc" id="L211">					newgc.roll(Calendar.YEAR, -1);</span>
<span class="nc" id="L212">					gc = (GregorianCalendar) newgc.clone();</span>
				}
				break;
			}
		}
<span class="nc" id="L217">		return newgc.getTime();</span>
	}

	/**
	 * Rolls the date	*
	 */
	public static Date rollDate(Date date, int roll) throws Exception {
<span class="nc" id="L224">		GregorianCalendar gc = new GregorianCalendar();</span>
<span class="nc" id="L225">		gc.setTime(date);</span>

		//logger.debug(&quot;In rollDate : Roll=&quot;+roll);
		//logger.debug(&quot;Date Got : &quot;+gc.getTime());

<span class="nc" id="L230">		boolean forward = true;</span>
<span class="nc bnc" id="L231" title="All 2 branches missed.">		if (roll &lt; 0) {</span>
<span class="nc" id="L232">			forward = false;</span>
		}

<span class="nc" id="L235">		GregorianCalendar newgc = (GregorianCalendar) gc.clone();</span>
		while (true) {
<span class="nc bnc" id="L237" title="All 2 branches missed.">			if (forward) {</span>
<span class="nc bnc" id="L238" title="All 2 branches missed.">				if (roll &gt; 365) {</span>
<span class="nc" id="L239">					newgc.roll(Calendar.DAY_OF_YEAR, 365);</span>
<span class="nc" id="L240">					roll = roll - 365;</span>
<span class="nc bnc" id="L241" title="All 2 branches missed.">					if (gc.before(newgc) == false) {</span>
						//logger.debug(&quot;Rolling year&quot;);
<span class="nc" id="L243">						newgc.roll(Calendar.YEAR, 1);</span>
<span class="nc" id="L244">						gc = (GregorianCalendar) newgc.clone();</span>
					}
				} else {
<span class="nc" id="L247">					newgc.roll(Calendar.DAY_OF_YEAR, roll);</span>
<span class="nc bnc" id="L248" title="All 2 branches missed.">					if (gc.before(newgc) == false) {</span>
<span class="nc" id="L249">						newgc.roll(Calendar.YEAR, 1);</span>
						//logger.debug(&quot;Rolling year&quot;);
<span class="nc" id="L251">						gc = (GregorianCalendar) newgc.clone();</span>
					}
					break;
				}
			} else {
<span class="nc bnc" id="L256" title="All 2 branches missed.">				if (roll &lt; -365) {</span>
<span class="nc" id="L257">					newgc.roll(Calendar.DAY_OF_YEAR, -365);</span>
<span class="nc" id="L258">					roll = roll + 365;</span>
<span class="nc bnc" id="L259" title="All 2 branches missed.">					if (gc.after(newgc) == false) {</span>
						//logger.debug(&quot;Rolling year&quot;);
<span class="nc" id="L261">						newgc.roll(Calendar.YEAR, -1);</span>
<span class="nc" id="L262">						gc = (GregorianCalendar) newgc.clone();</span>
					}
				} else {
<span class="nc" id="L265">					newgc.roll(Calendar.DAY_OF_YEAR, roll);</span>
<span class="nc bnc" id="L266" title="All 2 branches missed.">					if (gc.after(newgc) == false) {</span>
<span class="nc" id="L267">						newgc.roll(Calendar.YEAR, -1);</span>
						//logger.debug(&quot;Rolling year&quot;);
<span class="nc" id="L269">						gc = (GregorianCalendar) newgc.clone();</span>
					}
					break;
				}
			}
		}
		//logger.debug(&quot;Date Sending : &quot;+newgc.getTime());
<span class="nc" id="L276">		return newgc.getTime();</span>
	}

	/**
	 * Rolls the date

	 * Date 01-April-2004
	 */
	public static int dateCompare(String d2) {
<span class="nc" id="L285">		int result = 100;</span>
		try {
<span class="nc" id="L287">			GregorianCalendar gc = new GregorianCalendar();</span>
<span class="nc" id="L288">			SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-MMM-yyyy&quot;);</span>

<span class="nc" id="L290">			Date currentDate = sdf.parse(sdf.format(gc.getTime()));</span>
<span class="nc" id="L291">			Date d2_1 = sdf.parse(d2);</span>
<span class="nc" id="L292">			result = currentDate.compareTo(d2_1);</span>

<span class="nc" id="L294">		} catch (Exception ex) {</span>
<span class="nc" id="L295">			logger.warning(&quot;In exception&quot;);</span>
<span class="nc" id="L296">		}</span>
<span class="nc" id="L297">		return result;</span>
	}

	public static int dateCompare2(String d2) {
<span class="nc" id="L301">		int result = 100;</span>
		try {
<span class="nc" id="L303">			GregorianCalendar gc = new GregorianCalendar();</span>
<span class="nc" id="L304">			SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-MM-yyyy HH:mm:ss&quot;);</span>
<span class="nc" id="L305">			Date currentDate = new Date();</span>
<span class="nc" id="L306">			Date d2_1 = sdf.parse(d2);</span>
<span class="nc" id="L307">			result = currentDate.compareTo(d2_1);</span>
<span class="nc" id="L308">			logger.info(&quot;d2_1 : &quot;+d2_1+&quot;, Current Date: &quot;+currentDate+&quot; result: &quot;+result);</span>

<span class="nc" id="L310">		} catch (Exception ex) {</span>
<span class="nc" id="L311">			ex.printStackTrace();</span>
			//logger.warning(&quot;In exception&quot;);
<span class="nc" id="L313">		}</span>
<span class="nc" id="L314">		return result;</span>
	}

	public static String escapeQuote(String aRegexFragment) {
<span class="nc bnc" id="L318" title="All 2 branches missed.">		if (aRegexFragment == null) {</span>
<span class="nc" id="L319">			return &quot;&quot;;</span>
		}
<span class="nc" id="L321">		StringBuilder result = new StringBuilder();</span>
<span class="nc" id="L322">		StringCharacterIterator iterator = new StringCharacterIterator(aRegexFragment);</span>

<span class="nc" id="L324">		char character = iterator.current();</span>
<span class="nc bnc" id="L325" title="All 2 branches missed.">		while (character != StringCharacterIterator.DONE) {</span>
<span class="nc bnc" id="L326" title="All 2 branches missed.">			if (character == '\'') {</span>
<span class="nc" id="L327">				result.append(&quot;''&quot;);</span>
			} else {
<span class="nc" id="L329">				result.append(character);</span>
			}
<span class="nc" id="L331">			character = iterator.next();</span>
		}
<span class="nc" id="L333">		return result.toString();</span>
	}

	public static boolean validateIsNumber(String str) {
<span class="nc bnc" id="L337" title="All 2 branches missed.">		for (int i = 0; i &lt; str.length(); i++) {</span>
<span class="nc bnc" id="L338" title="All 2 branches missed.">			if (Character.isDigit(str.charAt(i)) == false) {</span>
<span class="nc" id="L339">				return false;</span>
			}
		}
<span class="nc" id="L342">		return true;</span>
	}

<span class="nc" id="L345">	private static Map gmtSdfMap = new HashMap();</span>
	public static String makeGMTDate(Date date, String format) {
<span class="nc bnc" id="L347" title="All 2 branches missed.">		if (format == null) {</span>
<span class="nc" id="L348">			format = &quot;yyMMdd HH:mm:ss&quot;;</span>
		}

<span class="nc" id="L351">		SimpleDateFormat sdf = (SimpleDateFormat) gmtSdfMap.get(format);</span>
<span class="nc bnc" id="L352" title="All 2 branches missed.">		if (sdf == null) {</span>
<span class="nc" id="L353">			new SimpleDateFormat(format);</span>
<span class="nc" id="L354">			sdf.setLenient(false);</span>
<span class="nc" id="L355">			sdf.setTimeZone(TimeZone.getTimeZone(&quot;GMT+00:00&quot;));</span>
<span class="nc" id="L356">			gmtSdfMap.put(format, sdf);</span>
		}
<span class="nc" id="L358">		String txTime = null;</span>
		try {
<span class="nc" id="L360">			txTime = sdf.format(date);</span>
			//logger.debug(&quot;txTime GOT :&quot; + txTime);
<span class="nc" id="L362">		} catch (Exception e) {</span>
<span class="nc" id="L363">			txTime = &quot;&quot;;</span>
<span class="nc" id="L364">		}</span>
<span class="nc" id="L365">		return txTime;</span>
	}

	public static String extractField(String body, String searchStart, String searchEnd,
			boolean includeSearchTerm) {
<span class="nc" id="L370">		return extractField(body, searchStart, searchEnd, includeSearchTerm, &quot;0&quot;);</span>
	}

	public static String extractField(String body, String searchStart, String searchEnd,
			boolean includeSearchTerm, String _startAt) {
<span class="nc" id="L375">		int i = 0;</span>
<span class="nc" id="L376">		int j = 0;</span>
<span class="nc" id="L377">		int searchStartLength = searchStart.length();</span>
<span class="nc" id="L378">		int searchEndLength = searchEnd.length();</span>

		//System.out.println(&quot;=body\n:&quot;+body);

<span class="nc" id="L382">		int startAt = Integer.parseInt(_startAt);</span>

<span class="nc" id="L384">		i = body.indexOf(searchStart, startAt);</span>
<span class="nc bnc" id="L385" title="All 2 branches missed.">		if (i == -1) {</span>
<span class="nc" id="L386">			return null;</span>
		}
<span class="nc" id="L388">		j = body.indexOf(searchEnd, i + searchStartLength);</span>

<span class="nc bnc" id="L390" title="All 2 branches missed.">		if (j == -1) {</span>
<span class="nc" id="L391">			return null;</span>
		}

		//System.out.println(&quot;i:&quot;+i);
		//System.out.println(&quot;j:&quot;+j);
<span class="nc" id="L396">		String res[] = null;</span>

<span class="nc bnc" id="L398" title="All 2 branches missed.">		if (includeSearchTerm) {</span>
<span class="nc" id="L399">			res = new String[]{body.substring(i, j + searchEndLength), &quot;&quot; + (j + searchEndLength - 1)};</span>
		} else {
<span class="nc" id="L401">			res = new String[]{body.substring(i + searchStartLength, j), &quot;&quot; + (j + searchEndLength - 1)};</span>
		}

<span class="nc" id="L404">		return res[0];</span>
	}

	public static GregorianCalendar rollCalender(String usageEndDate, int roll) throws Exception {
<span class="nc" id="L408">		Date d = new SimpleDateFormat(&quot;dd-MMM-yyyy&quot;).parse(usageEndDate);</span>
<span class="nc" id="L409">		GregorianCalendar gc = new GregorianCalendar();</span>
<span class="nc" id="L410">		gc.setTime(d);</span>

		//logger.debug(&quot;In rollCalender : Roll=&quot;+roll);
		//logger.debug(&quot;Date Got : &quot;+gc.getTime());

<span class="nc" id="L415">		GregorianCalendar newgc = (GregorianCalendar) gc.clone();</span>
		while (true) {
<span class="nc bnc" id="L417" title="All 2 branches missed.">			if (roll &gt; 365) {</span>
<span class="nc" id="L418">				newgc.roll(Calendar.DAY_OF_YEAR, 365);</span>
<span class="nc" id="L419">				roll = roll - 365;</span>
<span class="nc bnc" id="L420" title="All 2 branches missed.">				if (gc.before(newgc) == false) {</span>
					//logger.debug(&quot;Rolling year&quot;);
<span class="nc" id="L422">					newgc.roll(Calendar.YEAR, 1);</span>
<span class="nc" id="L423">					gc = (GregorianCalendar) newgc.clone();</span>
				}
			} else {
<span class="nc" id="L426">				newgc.roll(Calendar.DAY_OF_YEAR, roll);</span>
<span class="nc bnc" id="L427" title="All 2 branches missed.">				if (gc.before(newgc) == false) {</span>
<span class="nc" id="L428">					newgc.roll(Calendar.YEAR, 1);</span>
					//logger.debug(&quot;Rolling year&quot;);
<span class="nc" id="L430">					gc = (GregorianCalendar) newgc.clone();</span>
				}
				break;
			}
		}
		//logger.debug(&quot;Date Sending : &quot;+newgc.getTime());
<span class="nc" id="L436">		return newgc;</span>
	}

	public static HashMap setAlertMap(String message) {
<span class="nc" id="L440">		HashMap hm = new HashMap();</span>
		try {
<span class="nc" id="L442">			hm.put(&quot;&lt;MESSAGE&gt;&quot;, message);</span>
<span class="nc" id="L443">		} catch (Exception e) {</span>
<span class="nc" id="L444">			return null;</span>
<span class="nc" id="L445">		}</span>
<span class="nc" id="L446">		return hm;</span>
	}

	/**
	 * generateRandomNumber
	 */
	public static String generateRandomNumber(int len) {
<span class="nc" id="L453">		StringBuilder sb = new StringBuilder();</span>
<span class="nc bnc" id="L454" title="All 2 branches missed.">		for (int i = 0; i &lt; len;) {</span>
<span class="nc" id="L455">			sb.append((char) ((int) '0' + srandom.nextInt(10)));</span>
<span class="nc" id="L456">			i++;</span>
		}
<span class="nc" id="L458">		sb.append(System.nanoTime());</span>
<span class="nc" id="L459">		return sb.toString();</span>
	}

	public static String generateRandomNumber() {
<span class="nc" id="L463">		StringBuilder sb = new StringBuilder();</span>
<span class="nc" id="L464">		long currTime = System.currentTimeMillis();</span>
<span class="nc" id="L465">		int randomIntNO = random.nextInt();</span>
<span class="nc" id="L466">		sb.append(randomIntNO);</span>
		//sb.append(System.nanoTime());
<span class="nc" id="L468">		sb.append(System.currentTimeMillis());</span>
<span class="nc" id="L469">		return sb.toString();</span>
	}

	/*public static IpToLocation getIpToCountry(String ipOrDomain) {
		IpToLocation ipToCountry = null;
		long start = System.currentTimeMillis();
		long end = 0;
		try {
			InetAddress ip;
			//124.30.49.75
			//59.96.20.104
			ip = InetAddress.getByName(ipOrDomain);
			ipToCountry = IpToLocation.getFromIP(ipOrDomain);
			//System.out.println(&quot;IpToCountry: &quot;+ipToCountry);
		} catch (UnknownHostException e) {
			logger.warning(&quot;Error :&quot;+AppUtility.getStackTrace(e));
		}
		end = System.currentTimeMillis();
		logger.info(&quot;TimeTaken for IPtoCountry :&quot;+(end-start) +&quot;:iptoCountry status:&quot;+ipToCountry);
		return ipToCountry;
	}*/

	public static String getClassNameOnly(Class c) {
<span class="nc" id="L492">		String FQClassName = c.getName();</span>
		int firstChar;
<span class="nc" id="L494">		firstChar = FQClassName.lastIndexOf('.') + 1;</span>
<span class="nc bnc" id="L495" title="All 2 branches missed.">		if (firstChar &gt; 0) {</span>
<span class="nc" id="L496">			FQClassName = FQClassName.substring(firstChar);</span>
		}
<span class="nc" id="L498">		return FQClassName;</span>
	}

	public static String convertToDisplayAmt(String amt, int cExponent) {
<span class="nc" id="L502">		StringBuilder pAmt = new StringBuilder(amt);</span>
<span class="nc" id="L503">		int l = pAmt.length();</span>
<span class="nc bnc" id="L504" title="All 2 branches missed.">		while (l &lt;= cExponent) {</span>
<span class="nc" id="L505">			pAmt.insert(0, &quot;0&quot;);</span>
<span class="nc" id="L506">			l = pAmt.length();</span>
		}
<span class="nc" id="L508">		pAmt.insert(l - cExponent, &quot;.&quot;);</span>
<span class="nc" id="L509">		return pAmt.toString();</span>
	}

	public static String convertToDisplayAmt(String pAmt, String cExponent) {
<span class="nc" id="L513">		return convertToDisplayAmt(pAmt, Integer.parseInt(cExponent));</span>
	}

	public static String convertToDisplayAmt(long intPAmt, int intCExponent) {
<span class="nc" id="L517">		return convertToDisplayAmt(intPAmt+&quot;&quot;, intCExponent);</span>
	}

	public static BigInteger getIpResolvedValue(String ips) {

<span class="nc" id="L522">		BigInteger base = new BigInteger(&quot;256&quot;);</span>
<span class="nc" id="L523">		String[] numberTokens = ips.split(&quot;\\.&quot;);</span>
<span class="nc" id="L524">		int power = 3;</span>
<span class="nc" id="L525">		BigInteger bigResult = new BigInteger(&quot;0&quot;);</span>
<span class="nc bnc" id="L526" title="All 2 branches missed.">		for (String number : numberTokens) {</span>
			// logger.debug(&quot;number: &quot;+number);
<span class="nc" id="L528">			BigInteger bigNumber = new BigInteger(number);</span>
<span class="nc" id="L529">			BigInteger raise = raiseToPow(base, power--);</span>
			// logger.debug(&quot;raise: &quot;+raise);
<span class="nc" id="L531">			bigNumber = bigNumber.multiply(raise);</span>
<span class="nc" id="L532">			bigResult = bigResult.add(bigNumber);</span>
		}
		//System.out.println(&quot;Calculated result for &quot; + ips + &quot; is &quot; + bigResult);
<span class="nc" id="L535">		return bigResult;</span>
	}

	public static BigInteger getVersionRealNum(String ips) {
<span class="nc" id="L539">		ips = getOnlyNumerics(ips);</span>
<span class="nc" id="L540">		BigInteger base = new BigInteger(&quot;256&quot;);</span>
<span class="nc" id="L541">		String[] numberTokens = ips.split(&quot;\\.&quot;);</span>

<span class="nc bnc" id="L543" title="All 2 branches missed.">		if (ips.contains(&quot;.&quot;)) {</span>
<span class="nc" id="L544">			numberTokens = ips.split(&quot;\\.&quot;);</span>
<span class="nc bnc" id="L545" title="All 2 branches missed.">		} else if (ips.contains(&quot;_&quot;)) {</span>
<span class="nc" id="L546">			numberTokens = ips.split(&quot;\\_&quot;);</span>
		}
		//int power = 3;
<span class="nc" id="L549">		int power = numberTokens.length - 1;</span>
<span class="nc" id="L550">		BigInteger bigResult = new BigInteger(&quot;0&quot;);</span>
		try {
<span class="nc bnc" id="L552" title="All 2 branches missed.">			for (String number : numberTokens) {</span>
				// logger.debug(&quot;number: &quot;+number);
<span class="nc" id="L554">				BigInteger bigNumber = new BigInteger(number);</span>
<span class="nc" id="L555">				BigInteger raise = raiseToPow(base, power--);</span>
				// logger.debug(&quot;raise: &quot;+raise);
<span class="nc" id="L557">				bigNumber = bigNumber.multiply(raise);</span>
<span class="nc" id="L558">				bigResult = bigResult.add(bigNumber);</span>
			}
<span class="nc" id="L560">		} catch (Exception e) {</span>
<span class="nc" id="L561">			bigResult = new BigInteger(&quot;0&quot;);</span>
<span class="nc" id="L562">		}</span>

		//System.out.println(&quot;Calculated result for &quot; + ips + &quot; is &quot; + bigResult);
<span class="nc" id="L565">		return bigResult;</span>
	}

	private static BigInteger raiseToPow(BigInteger base, int count) {
<span class="nc" id="L569">		BigInteger bi = new BigInteger(&quot;1&quot;);</span>
<span class="nc bnc" id="L570" title="All 2 branches missed.">		for (int i = 0; i &lt; count; i++) {</span>
<span class="nc" id="L571">			bi = bi.multiply(base);</span>
		}
<span class="nc" id="L573">		return bi;</span>
	}

	public static String getOnlyNumerics(String str) {
<span class="nc bnc" id="L577" title="All 2 branches missed.">		if (str == null) {</span>
<span class="nc" id="L578">			return null;</span>
		}
<span class="nc" id="L580">		StringBuilder strBuff = new StringBuilder();</span>
		char c;
<span class="nc bnc" id="L582" title="All 2 branches missed.">		for (int i = 0; i &lt; str.length(); i++) {</span>
<span class="nc" id="L583">			c = str.charAt(i);</span>

<span class="nc bnc" id="L585" title="All 2 branches missed.">			if (c == '_') {</span>
<span class="nc" id="L586">				strBuff.append(c);</span>
			}
<span class="nc bnc" id="L588" title="All 2 branches missed.">			if (c == '.') {</span>
<span class="nc" id="L589">				strBuff.append(c);</span>
			}
<span class="nc bnc" id="L591" title="All 2 branches missed.">			if (Character.isDigit(c)) {</span>
<span class="nc" id="L592">				strBuff.append(c);</span>
			}
		}
<span class="nc" id="L595">		return strBuff.toString();</span>
	}

	public static String mask(String number, String instanceId) {
<span class="nc" id="L599">		String maskedCardNo = &quot;&quot;;</span>
<span class="nc" id="L600">		String maskingPattern = null;</span>
<span class="nc bnc" id="L601" title="All 2 branches missed.">		if (maskingPattern == null) {</span>
<span class="nc" id="L602">			maskingPattern = &quot;NNNN xxxx xxxx NNNN&quot;;</span>
		}
<span class="nc" id="L604">		maskedCardNo = mask(maskingPattern, number, &quot;x&quot;);</span>
<span class="nc" id="L605">		return maskedCardNo;</span>
	}

	public static String mask(String pattern, String number, String placeholder) {
<span class="nc bnc" id="L609" title="All 4 branches missed.">		if (number == null || &quot;NNNNNNNNNNNNNNNN&quot;.equals(pattern)) {</span>
<span class="nc" id="L610">			return number;</span>
		}

<span class="nc bnc" id="L613" title="All 4 branches missed.">		if (&quot;&quot;.equals(number) || pattern == null) {</span>
<span class="nc" id="L614">			return number;</span>
		}

<span class="nc" id="L617">		StringBuilder output = new StringBuilder();</span>
<span class="nc bnc" id="L618" title="All 4 branches missed.">		if (pattern != null &amp;&amp; number != null) {</span>
<span class="nc" id="L619">			char[] lpattern = pattern.toCharArray();</span>
<span class="nc" id="L620">			char[] lnumber = number.toCharArray();</span>
<span class="nc bnc" id="L621" title="All 6 branches missed.">			for (int i = 0, j = 0; i &lt; lpattern.length &amp; j &lt; lnumber.length; i++, j++) {</span>
<span class="nc bnc" id="L622" title="All 3 branches missed.">				switch (lpattern[i]) {</span>
					case 'N': {
<span class="nc" id="L624">						output.append(lnumber[j]);</span>
<span class="nc" id="L625">						break;</span>
					}
					case 'x':
					case 'X': {
<span class="nc bnc" id="L629" title="All 2 branches missed.">						if (placeholder != null) {</span>
<span class="nc" id="L630">							output.append(placeholder);</span>
						}
						break;
					}
					default: {
<span class="nc" id="L635">						output.append(lpattern[i]);</span>
<span class="nc" id="L636">						j--;</span>
					}
				}
			}
<span class="nc" id="L640">		} else {</span>
<span class="nc" id="L641">			logger.fine(&quot;pattern: &quot; + pattern);</span>
<span class="nc" id="L642">			logger.fine(&quot;placeholder: &quot; + placeholder);</span>
<span class="nc" id="L643">			return number;</span>
		}
<span class="nc" id="L645">		return output.toString();</span>
	}
<span class="nc" id="L647">	static SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>

	public static Date getTodayDate() {
<span class="nc" id="L650">		Date dtx = new Date();</span>
<span class="nc" id="L651">		String temp = sdf.format(dtx);</span>
		try {
<span class="nc" id="L653">			dtx = sdf.parse(temp);</span>
<span class="nc" id="L654">		} catch (ParseException e) {</span>
<span class="nc" id="L655">			logger.warning(&quot;Error :&quot;+AppUtility.getStackTrace(e));</span>
<span class="nc" id="L656">		}</span>
<span class="nc" id="L657">		return dtx;</span>
	}

	public static java.sql.Date getSqlTodayDate() {
<span class="nc" id="L661">		java.sql.Date datex = new java.sql.Date(System.currentTimeMillis());</span>
		//logger.finest(&quot;Curr Date:&quot; + datex);
<span class="nc" id="L663">		return datex;</span>
	}

	public static Timestamp get24hrBackDate(){
<span class="nc" id="L667">		Calendar calendar = new GregorianCalendar();</span>
<span class="nc" id="L668">		calendar.add(Calendar.DATE, -1);</span>
<span class="nc" id="L669">		return new Timestamp(calendar.getTimeInMillis());</span>
	}
	public static Timestamp getHourNextDate(int hours){
<span class="nc" id="L672">		Calendar calendar = new GregorianCalendar();</span>
<span class="nc" id="L673">		calendar.add(Calendar.HOUR_OF_DAY, hours);</span>
<span class="nc" id="L674">		return new Timestamp(calendar.getTimeInMillis());</span>
	}

	public static java.sql.Date getSqlDateDayOffSet(int noOfDays) {
<span class="nc" id="L678">		Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L679">		calendar.add(Calendar.DATE, noOfDays);</span>
<span class="nc" id="L680">		Timestamp currentTime = new Timestamp(calendar.getTimeInMillis());</span>
<span class="nc" id="L681">		java.sql.Date datex = new java.sql.Date(calendar.getTimeInMillis());</span>
<span class="nc" id="L682">		return datex;</span>
	}

	public static java.sql.Date getSqlDateMonthOffSet(int month) {
<span class="nc" id="L686">		Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L687">		calendar.add(Calendar.MONTH, month);</span>
<span class="nc" id="L688">		Timestamp currentTime = new Timestamp(calendar.getTimeInMillis());</span>
<span class="nc" id="L689">		java.sql.Date datex = new java.sql.Date(calendar.getTimeInMillis());</span>
<span class="nc" id="L690">		return datex;</span>
	}

	public static java.sql.Date getSqlDateYearOffSet(int year) {
<span class="nc" id="L694">		Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L695">		calendar.add(Calendar.YEAR, year);</span>
<span class="nc" id="L696">		Timestamp currentTime = new Timestamp(calendar.getTimeInMillis());</span>
<span class="nc" id="L697">		java.sql.Date datex = new java.sql.Date(calendar.getTimeInMillis());</span>
<span class="nc" id="L698">		return datex;</span>
	}
<span class="nc" id="L700">	static SimpleDateFormat sdfFileDate = new SimpleDateFormat(&quot;MM-dd-yyyy HH:mm:ss&quot;);</span>

	public static String getFileAppendDate() {
<span class="nc" id="L703">		String tempDate = sdfFileDate.format(new Date());</span>
<span class="nc" id="L704">		tempDate = tempDate.replace(&quot; &quot;, &quot;_&quot;);</span>
<span class="nc" id="L705">		tempDate = tempDate.replace(&quot;:&quot;, &quot;_&quot;);</span>
<span class="nc" id="L706">		return tempDate;</span>
	}

	public static boolean checkEmptyOrNull(String test) {
<span class="nc bnc" id="L710" title="All 4 branches missed.">		if (test != null &amp;&amp; !test.trim().equals(&quot;&quot;)) {</span>
<span class="nc" id="L711">			return false;</span>
		}
<span class="nc" id="L713">		return true;</span>
	}

	public static void closeDBQuietly(Connection conn, Statement stmt, ResultSet rs) {
		try {
<span class="nc" id="L718">			closeDBQuietly(rs);</span>
		} finally {
			try {
<span class="nc" id="L721">				closeDBQuietly(stmt);</span>
			} finally {
<span class="nc" id="L723">				closeDBQuietly(conn);</span>
			}
		}
<span class="nc" id="L726">	}</span>

	public static void closeDBQuietly(ResultSet rs) {
		try {
<span class="nc" id="L730">			close(rs);</span>
<span class="nc" id="L731">		} catch (Exception e) {</span>
<span class="nc" id="L732">			logger.warning(&quot;Error: &quot;+AppUtility.getStackTrace(e));</span>
<span class="nc" id="L733">		}</span>
<span class="nc" id="L734">	}</span>

	public static void closeDBQuietly(Statement stmt) {
		try {
<span class="nc" id="L738">			close(stmt);</span>
<span class="nc" id="L739">		} catch (Exception e) {</span>
<span class="nc" id="L740">			logger.warning(&quot;Error: &quot;+AppUtility.getStackTrace(e));</span>
<span class="nc" id="L741">		}</span>
<span class="nc" id="L742">	}</span>

	public static void closeDBQuietly(Connection conn) {
		try {
<span class="nc" id="L746">			close(conn);</span>
<span class="nc" id="L747">		} catch (Exception e) {</span>
<span class="nc" id="L748">			logger.warning(&quot;Error: &quot;+AppUtility.getStackTrace(e));</span>
<span class="nc" id="L749">		}</span>
<span class="nc" id="L750">	}</span>

	public static void close(Connection conn) throws SQLException {
<span class="nc bnc" id="L753" title="All 2 branches missed.">		if (conn != null) {</span>
<span class="nc" id="L754">			conn.close();</span>
		}
<span class="nc" id="L756">	}</span>

	/**
	 * Close a &lt;code&gt;ResultSet&lt;/code&gt;, avoid closing if null.
	 *
	 * @param rs ResultSet to close.
	 * @throws SQLException if a database access error occurs
	 */
	public static void close(ResultSet rs) throws SQLException {
<span class="nc bnc" id="L765" title="All 2 branches missed.">		if (rs != null) {</span>
<span class="nc" id="L766">			rs.close();</span>
		}
<span class="nc" id="L768">	}</span>

	/**
	 * Close a &lt;code&gt;Statement&lt;/code&gt;, avoid closing if null.
	 *
	 * @param stmt Statement to close.
	 * @throws SQLException if a database access error occurs
	 */
	public static void close(Statement stmt) throws SQLException {
<span class="nc bnc" id="L777" title="All 2 branches missed.">		if (stmt != null) {</span>
<span class="nc" id="L778">			stmt.close();</span>
		}
<span class="nc" id="L780">	}</span>

	public static boolean isBlankNull(String arg) {
		//logger.info(&quot;Testing for Null *********remove it*************&quot;+arg);

<span class="nc bnc" id="L785" title="All 2 branches missed.">		if (arg == null) {</span>
<span class="nc" id="L786">			return true;</span>
		}

<span class="nc bnc" id="L789" title="All 2 branches missed.">		if (&quot;&quot;.equals(arg)) {</span>
<span class="nc" id="L790">			return true;</span>
		}

<span class="nc bnc" id="L793" title="All 2 branches missed.">		if (&quot;null&quot;.equals(arg)) {</span>
<span class="nc" id="L794">			return true;</span>
		}

<span class="nc bnc" id="L797" title="All 2 branches missed.">		if (&quot;NULL&quot;.equals(arg)) {</span>
<span class="nc" id="L798">			return true;</span>
		}

<span class="nc" id="L801">		return false;</span>
		/*if(!(arg == null) || &quot;&quot;.equals(arg)){
		return true;
		}else{
		return false;
		}*/

	}

	public static String getCurrentTableSuffix(String clientId){
<span class="nc" id="L811">		String tableprefix = null;</span>
<span class="nc bnc" id="L812" title="All 2 branches missed.">		if(clientId != null){</span>
<span class="nc" id="L813">			tableprefix = clientId.substring(0, 6);</span>
		}else{
<span class="nc" id="L815">			tableprefix = getCurrentTableSuffix();</span>
		}
<span class="nc" id="L817">		return tableprefix;</span>
	}

	public static String getCurrentTableSuffix(){
<span class="nc" id="L821">		Date date = new Date();</span>
<span class="nc" id="L822">		return getCurrentTableSuffix(date);</span>
	}

	public static String getCurrentTableSuffix(Date date,String datePattern){
<span class="nc" id="L826">		Format sdfYYYYMM = null;</span>
<span class="nc bnc" id="L827" title="All 2 branches missed.">		if(isBlankNull(datePattern)) {</span>
<span class="nc" id="L828">			sdfYYYYMM = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;);</span>
		}else{
<span class="nc" id="L830">			sdfYYYYMM = new SimpleDateFormat(datePattern);</span>
		}
<span class="nc" id="L832">		return sdfYYYYMM.format(date);</span>
	}

	public static String getCurrentTableSuffix(Date date){
<span class="nc" id="L836">		Format sdfYYYYMM = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;);</span>
<span class="nc" id="L837">		return sdfYYYYMM.format(date);</span>
	}

	public static List getAllTableleSuffix(int numberOfMonths){
<span class="nc" id="L841">		Format sdfYYYYMM =  new SimpleDateFormat(&quot;yyyyMM&quot;);</span>
<span class="nc" id="L842">		List list = new ArrayList();</span>
		Calendar calendar;
		Date date;
<span class="nc" id="L845">		calendar = Calendar.getInstance();</span>

<span class="nc" id="L847">		date = new Date(calendar.getTimeInMillis());</span>
<span class="nc" id="L848">		list.add(sdfYYYYMM.format(date));</span>
<span class="nc bnc" id="L849" title="All 2 branches missed.">		for (int i = 0; i &lt; numberOfMonths; i++) {</span>
<span class="nc" id="L850">			calendar.add(Calendar.MONTH, -1);</span>
<span class="nc" id="L851">			date = new Date(calendar.getTimeInMillis());</span>
<span class="nc" id="L852">			calendar.setTime(date);</span>
<span class="nc" id="L853">			list.add(sdfYYYYMM.format(date));</span>
		}
<span class="nc" id="L855">		return list;</span>
	}

	public static ArrayList&lt;String&gt; getTimeStampKey(String key, int numberOfMin){
<span class="nc" id="L859">		return getTimeStampKey(key, numberOfMin, new Date());</span>
	}
	public static ArrayList&lt;String&gt; getTimeStampKey(String key, int numberOfHours, boolean hourFlag){
<span class="nc" id="L862">		return getTimeStampKey(key, numberOfHours, new Date(), hourFlag);</span>
	}
	public static ArrayList&lt;String&gt; getTimeStampKey(String key, int numberOfMin, Date time){
<span class="nc" id="L865">        ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();</span>
<span class="nc" id="L866">        Calendar currentTime = new GregorianCalendar();</span>
<span class="nc" id="L867">        currentTime.setTime(time);</span>

<span class="nc" id="L869">        currentTime.add(Calendar.MINUTE, 1);</span>
<span class="nc" id="L870">        int hour = currentTime.get(Calendar.HOUR_OF_DAY);</span>
<span class="nc" id="L871">        int min = currentTime.get(Calendar.MINUTE);</span>
        int tempMin, tempHr;
<span class="nc bnc" id="L873" title="All 2 branches missed.">        for (int i=0;i&lt;numberOfMin;i++ ){</span>
<span class="nc bnc" id="L874" title="All 2 branches missed.">            if((min-1)&gt;=0){</span>
<span class="nc" id="L875">                tempMin = min = (min-1);</span>
<span class="nc" id="L876">                tempHr = hour;</span>
            }else{
<span class="nc" id="L878">                tempMin = min = 59;</span>
<span class="nc bnc" id="L879" title="All 2 branches missed.">                if(hour&gt;0) {</span>
<span class="nc" id="L880">                    tempHr = hour = (hour-1);</span>
                } else {
<span class="nc" id="L882">                     tempHr = hour = 23;</span>
                }
            }
<span class="nc" id="L885">            list.add(tempHr + &quot;:&quot; + tempMin + &quot;|&quot; + key);</span>
        }
<span class="nc" id="L887">        return list;</span>
    }
	public static ArrayList&lt;String&gt; getTimeStampKey(String key, int numberOfHours, Date time, boolean hourFlag){
<span class="nc" id="L890">        ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();</span>
<span class="nc" id="L891">        Calendar currentTime = new GregorianCalendar();</span>
<span class="nc" id="L892">        currentTime.setTime(time);</span>
<span class="nc" id="L893">        currentTime.add(Calendar.HOUR_OF_DAY, 1);</span>
<span class="nc" id="L894">        int hour = currentTime.get(Calendar.HOUR_OF_DAY);</span>
        int tempHr;
<span class="nc bnc" id="L896" title="All 2 branches missed.">        for (int i=0;i&lt;numberOfHours;i++ ){</span>
<span class="nc bnc" id="L897" title="All 2 branches missed.">        	if(hour&gt;0){</span>
<span class="nc" id="L898">        		tempHr = hour = (hour-1);</span>
        	}else{
<span class="nc" id="L900">        		tempHr = hour = 23;</span>
        	}
<span class="nc" id="L902">        	list.add(tempHr + &quot;:&quot; + key);</span>
        }
<span class="nc" id="L904">        return list;</span>
    }
	/*
        //============================JSON array return

        public static JsonArray getJsonArrayTimeStampKey(List keys, int numberOfMin){
            return getJsonArrayTimeStampKey(keys, numberOfMin, new Date());
        }

        public static JsonArray getJsonArrayTimeStampKey(List keys, int numberOfMin, Date time){
            JsonArray list = JsonArray.create().empty();
            Calendar currentTime = new GregorianCalendar();
            currentTime.setTime(time);

            currentTime.add(Calendar.MINUTE, 1);
            int hour = currentTime.get(Calendar.HOUR_OF_DAY);
            int min = currentTime.get(Calendar.MINUTE);
            int tempMin, tempHr;
            for (int i=0;i&lt;numberOfMin;i++ ){
                if((min-1)&gt;=0){
                    tempMin = min = (min-1);
                    tempHr = hour;
                }else{
                    tempMin = min = 59;
                    if(hour&gt;0) {
                        tempHr = hour = (hour-1);
                    } else {
                         tempHr = hour = 23;
                    }
                }
                JsonArray ja = JsonArray.create().empty();

                for (Object object : keys) {
                    ja.add(object);
                }


                ja.add(tempHr);
                ja.add(tempMin);
                list.add(ja);
            }
            return list;
        }

        public static JsonArray getJsonArrayTimeStampKey(List keys, int numberOfHours, boolean hourFlag){
            return getJsonArrayTimeStampKey(keys, numberOfHours, new Date(), hourFlag);
        }
        public static JsonArray getJsonArrayTimeStampKey(List keys, int numberOfHours, Date time, boolean hourFlag){
            JsonArray list = JsonArray.create().empty();
            Calendar currentTime = new GregorianCalendar();
            currentTime.setTime(time);
            currentTime.add(Calendar.HOUR_OF_DAY, 1);
            int hour = currentTime.get(Calendar.HOUR_OF_DAY);
            int tempHr;
            for (int i=0;i&lt;numberOfHours;i++ ){
                if(hour&gt;0){
                    tempHr = hour = (hour-1);
                }else{
                    tempHr = hour = 23;
                }

                JsonArray ja = JsonArray.create().empty();

                for (Object object : keys) {
                    ja.add(object);
                }

                ja.add(tempHr);

                list.add(ja);
            }
            return list;
        }

        public static JsonArray getJsonArrayTimeStampKeyDay(List keys, int numberOfHours){
            return getJsonArrayTimeStampKeyDay(keys, numberOfHours, new Date());
        }
        public static JsonArray getJsonArrayTimeStampKeyDay(List keys, int numberOfHours, Date time){
            JsonArray list = JsonArray.create().empty();
            Calendar calendar;
            calendar = Calendar.getInstance();
            JsonArray ja = JsonArray.create().empty();

            for (Object object : keys) {
                ja.add(object);
            }

            ja.add(calendar.get(Calendar.YEAR));
            ja.add(calendar.get(Calendar.MONTH)+1);
            ja.add(calendar.get(Calendar.DATE));


            list.add(ja);
            for (int i=0;i&lt;(numberOfHours-1);i++ ){

                calendar.add(Calendar.DATE, -1);

                ja = JsonArray.create().empty();

                for (Object object : keys) {
                    ja.add(object);
                }
                ja.add(calendar.get(Calendar.YEAR));
                ja.add(calendar.get(Calendar.MONTH)+1);
                ja.add(calendar.get(Calendar.DATE));
                list.add(ja);

            }
            return list;
        }

    */
	//=======================Added by Deepak.Modi Start=========================
	public static Date getUtilDateMinOffSet(int noOfMin) {
<span class="nc" id="L1018">		Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L1019">		calendar.add(Calendar.MINUTE, noOfMin);</span>
<span class="nc" id="L1020">		Date dateOffSet = new Date(calendar.getTimeInMillis());</span>
<span class="nc" id="L1021">		return dateOffSet;</span>
	}


	public static Timestamp getSqlDatePastNoOfHours(int noOfHours) {
<span class="nc" id="L1026">		Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L1027">		calendar.add(Calendar.HOUR, -noOfHours);</span>
<span class="nc" id="L1028">		Timestamp currentTime = new Timestamp(calendar.getTimeInMillis());</span>
<span class="nc" id="L1029">		return currentTime;</span>
	}
	public static Timestamp getSqlDatePastNoOfMinutes(int noOfMinutes) {
<span class="nc" id="L1032">		Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L1033">		calendar.add(Calendar.MINUTE, -noOfMinutes);</span>
<span class="nc" id="L1034">		Timestamp currentTime = new Timestamp(calendar.getTimeInMillis());</span>
<span class="nc" id="L1035">		return currentTime;</span>
	}

	public static Timestamp getSqlDateNextNoOfMinutes(int noOfMinutes) {
<span class="nc" id="L1039">		Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L1040">		calendar.add(Calendar.MINUTE, noOfMinutes);</span>
<span class="nc" id="L1041">		Timestamp currentTime = new Timestamp(calendar.getTimeInMillis());</span>
<span class="nc" id="L1042">		return currentTime;</span>
	}

	/*public static String[] getEntityNameWithMaxCountCondition(List elements, int maxCount){
		String data[]=new String[2];
		data[0] = new String(&quot;&quot;);  //Element name
		data[1] = new String(&quot;&quot;);  //Max count

		String elementWithMaxCount=null;

		//HashBag extends DefaultMapBag implements Bag, provided by Apache Collections.
		//HashBag is a kind of Map. This is used to map bag elements to a number; the number represents the number
		//of occurrences of that element in the bag.
		HashBag bag=new HashBag();
		bag.addAll(elements);
		int tempCount=0;

		for(Object elem:bag.uniqueSet()){
			//System.out.println(&quot;Element: &quot;+elem+&quot;:&quot;+bag.getCount(elem));
			tempCount=bag.getCount(elem);
			if(tempCount&gt;=maxCount){
				elementWithMaxCount=elem.toString();
				break;
			}
		}
		data[0] = elementWithMaxCount;
		data[1] = tempCount+&quot;&quot;;
		return data;
	}*/
	public static int getRatingValueUsingPercent(int ratingValue, int ratingPercent){
<span class="nc" id="L1072">		int value=0;</span>
		try {
<span class="nc" id="L1074">			double temp = (ratingValue*(double)ratingPercent/100);</span>
<span class="nc" id="L1075">			value = (int)temp;</span>
		}
<span class="nc" id="L1077">		catch(Exception e){</span>
<span class="nc" id="L1078">			logger.warning(&quot;Error : &quot;+AppUtility.getStackTrace(e));</span>
<span class="nc" id="L1079">		}</span>
<span class="nc" id="L1080">		return value;</span>
	}
	//=======================Added by Deepak.Modi End=========================
	/*
	public static String getDateDifferenceInDay(String fromDate){
		SimpleDateFormat myFormat = new SimpleDateFormat(&quot;yyyyMMdd&quot;);
		long dateDiff = 0;
		try {
			Date date1 = myFormat.parse(fromDate);
			Date date2 = new Date();
			long diff = date2.getTime() - date1.getTime();
			dateDiff = TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS);

		} catch (ParseException e) {
			e.printStackTrace();
		}
		dateDiff = dateDiff+1;
		return dateDiff+&quot;&quot;;

	}
	*/
	public static long getDateDifferenceInDay(String fromDate){
<span class="nc" id="L1102">		SimpleDateFormat myFormat = new SimpleDateFormat(&quot;yyyyMMdd&quot;);</span>
<span class="nc" id="L1103">		long dateDiff = 0;</span>
		try {
<span class="nc" id="L1105">			Date date1 = myFormat.parse(fromDate);</span>
<span class="nc" id="L1106">			Date date2 = new Date();</span>
<span class="nc" id="L1107">			long diff = date2.getTime() - date1.getTime();</span>
<span class="nc" id="L1108">			dateDiff = TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS);</span>

<span class="nc" id="L1110">		} catch (ParseException e) {</span>
<span class="nc" id="L1111">			e.printStackTrace();</span>
<span class="nc" id="L1112">		}</span>
<span class="nc" id="L1113">		dateDiff = dateDiff+1;</span>
<span class="nc" id="L1114">		return dateDiff;</span>

	}

	public static long getDateDifferenceInMin(String fromDate){
<span class="nc" id="L1119">		SimpleDateFormat myFormat = new SimpleDateFormat(&quot;yyyyMMddhhmm&quot;);</span>
<span class="nc" id="L1120">		long dateDiff = 0;</span>
		try {
<span class="nc" id="L1122">			Date date1 = myFormat.parse(fromDate);</span>
<span class="nc" id="L1123">			Date date2 = new Date();</span>
<span class="nc" id="L1124">			long diff = date2.getTime() - date1.getTime();</span>
<span class="nc" id="L1125">			dateDiff = TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS);</span>

<span class="nc" id="L1127">		} catch (ParseException e) {</span>
<span class="nc" id="L1128">			logger.warning(&quot;Error: &quot;+AppUtility.getStackTrace(e));</span>
<span class="nc" id="L1129">		}</span>
<span class="nc" id="L1130">		dateDiff = dateDiff+1;</span>
<span class="nc" id="L1131">		return dateDiff;</span>

	}

	public static long getDateDifferenceInHour(String fromDate){
<span class="nc" id="L1136">		SimpleDateFormat myFormat = new SimpleDateFormat(&quot;yyyyMMddhh&quot;);</span>
<span class="nc" id="L1137">		long dateDiff = 0;</span>
		try {
<span class="nc" id="L1139">			Date date1 = myFormat.parse(fromDate);</span>
<span class="nc" id="L1140">			Date date2 = new Date();</span>
<span class="nc" id="L1141">			long diff = date2.getTime() - date1.getTime();</span>
<span class="nc" id="L1142">			dateDiff = TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS);</span>

<span class="nc" id="L1144">		} catch (ParseException e) {</span>
<span class="nc" id="L1145">			logger.warning(&quot;Error: &quot;+AppUtility.getStackTrace(e));</span>
<span class="nc" id="L1146">		}</span>
<span class="nc" id="L1147">		dateDiff = dateDiff+1;</span>
<span class="nc" id="L1148">		return dateDiff;</span>

	}

	public static long getDateDifferenceInMonth(String fromDate){
<span class="nc" id="L1153">		SimpleDateFormat myFormat = new SimpleDateFormat(&quot;yyyyMMdd&quot;);</span>
<span class="nc" id="L1154">		long dateDiff = 0;</span>
		try {
<span class="nc" id="L1156">			Date date1 = myFormat.parse(fromDate);</span>
<span class="nc" id="L1157">			Date date2 = new Date();</span>
<span class="nc" id="L1158">			long diff = date2.getTime() - date1.getTime();</span>
<span class="nc" id="L1159">			dateDiff = TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS);</span>

<span class="nc" id="L1161">		} catch (ParseException e) {</span>
<span class="nc" id="L1162">			logger.warning(&quot;Error: &quot;+AppUtility.getStackTrace(e));</span>
<span class="nc" id="L1163">		}</span>
<span class="nc" id="L1164">		dateDiff = dateDiff+1;</span>
<span class="nc" id="L1165">		return dateDiff;</span>

	}

	public static int getDateDifferenceNextCalDateInSeconds(int numberOfDays, boolean tillNextMidNight){
<span class="nc" id="L1170">		LocalDateTime currentTime = LocalDateTime.now(); // now() : since Joda Time 2.0</span>
<span class="nc" id="L1171">		LocalDateTime temp = currentTime.plusDays(numberOfDays);</span>
<span class="nc" id="L1172">		LocalDateTime endDate = null;</span>
<span class="nc bnc" id="L1173" title="All 2 branches missed.">		if(tillNextMidNight){</span>
<span class="nc" id="L1174">			endDate = LocalDateTime.of(</span>
<span class="nc" id="L1175">					LocalDate.of(currentTime.getYear(), currentTime.getMonth(), currentTime.getDayOfMonth()),</span>
<span class="nc" id="L1176">					LocalTime.of(temp.getHour(), temp.getMinute(), temp.getSecond(), temp.getNano()));</span>
		}else{
<span class="nc" id="L1178">			endDate = temp;</span>
		}
<span class="nc" id="L1180">		Duration sec = Duration.between(currentTime, endDate);</span>
<span class="nc" id="L1181">		return (int) sec.toMillis();</span>
	}

	public static Set getDateString(int numberofDays,  String minOrDay, boolean includeCurrentDay){
<span class="nc" id="L1185">		Date time = new Date();</span>
<span class="nc" id="L1186">		Format sdfYYYYMM =  new SimpleDateFormat(&quot;yyyyMMdd&quot;);</span>
<span class="nc bnc" id="L1187" title="All 2 branches missed.">		if(&quot;DAY&quot;.equalsIgnoreCase(minOrDay)){</span>
<span class="nc" id="L1188">			sdfYYYYMM =  new SimpleDateFormat(&quot;yyyyMMdd&quot;);</span>
<span class="nc bnc" id="L1189" title="All 2 branches missed.">		}else if(&quot;MIN&quot;.equalsIgnoreCase(minOrDay)){</span>
<span class="nc" id="L1190">			sdfYYYYMM =  new SimpleDateFormat(&quot;yyyyMMddHHmm&quot;);</span>
		}
<span class="nc" id="L1192">		Set set = new HashSet();</span>
		Calendar calendar;
<span class="nc" id="L1194">		calendar = Calendar.getInstance();</span>
<span class="nc bnc" id="L1195" title="All 2 branches missed.">		if(includeCurrentDay){</span>
<span class="nc" id="L1196">			set.add(sdfYYYYMM.format(time));</span>
		}
<span class="nc bnc" id="L1198" title="All 2 branches missed.">		for (int i = 0; i &lt; numberofDays; i++) {</span>
<span class="nc bnc" id="L1199" title="All 2 branches missed.">			if(&quot;DAY&quot;.equalsIgnoreCase(minOrDay)){</span>
<span class="nc" id="L1200">				calendar.add(Calendar.DATE, -1);</span>
			}
<span class="nc bnc" id="L1202" title="All 2 branches missed.">			if(&quot;MIN&quot;.equalsIgnoreCase(minOrDay)){</span>
<span class="nc" id="L1203">				calendar.add(Calendar.MINUTE, -1);</span>
			}
<span class="nc" id="L1205">			time = new Date(calendar.getTimeInMillis());</span>
<span class="nc" id="L1206">			calendar.setTime(time);</span>
<span class="nc" id="L1207">			set.add(sdfYYYYMM.format(time));</span>
		}
<span class="nc" id="L1209">		return set;</span>
	}



	public static List getDateString(int numberOfDays){
<span class="nc" id="L1215">		Format yyyyMMdd =  new SimpleDateFormat(&quot;yyyyMMdd&quot;);</span>
<span class="nc" id="L1216">		List list = new ArrayList();</span>
		Calendar calendar;
		Date date;
<span class="nc" id="L1219">		calendar = Calendar.getInstance();</span>

<span class="nc" id="L1221">		date = new Date(calendar.getTimeInMillis());</span>
<span class="nc" id="L1222">		list.add(yyyyMMdd.format(date));</span>
<span class="nc bnc" id="L1223" title="All 2 branches missed.">		for (int i = 0; i &lt; numberOfDays; i++) {</span>
<span class="nc" id="L1224">			calendar.add(Calendar.DATE, -1);</span>
<span class="nc" id="L1225">			date = new Date(calendar.getTimeInMillis());</span>
<span class="nc" id="L1226">			calendar.setTime(date);</span>
<span class="nc" id="L1227">			list.add(yyyyMMdd.format(date));</span>
		}
<span class="nc" id="L1229">		return list;</span>
	}
	
	public static Map mergeTwoMapsWithList(Map a, Map b) {
<span class="nc" id="L1233">		Map result = new ConcurrentHashMap&lt;String, ArrayList&gt;();</span>

<span class="nc" id="L1235">		Set tempA = new HashSet(a.keySet());</span>
<span class="nc" id="L1236">		Set tempB = new HashSet(b.keySet());</span>

		// System.out.println(&quot;a.keySet():&quot;+a.keySet());
<span class="nc" id="L1239">		Iterator&lt;String&gt; it = a.keySet().iterator();</span>
		// System.out.println(&quot;a:&quot;+a+&quot; it :&quot;+it);
<span class="nc bnc" id="L1241" title="All 2 branches missed.">		while (it.hasNext()) {</span>
<span class="nc" id="L1242">			String key = (String) it.next();</span>
			// System.out.println(&quot;key :&quot;+key);
<span class="nc" id="L1244">			ArrayList listA = (ArrayList) a.get(key);</span>
<span class="nc" id="L1245">			ArrayList listB = (ArrayList) b.get(key);</span>
<span class="nc" id="L1246">			ArrayList resultList = new ArrayList();</span>

<span class="nc bnc" id="L1248" title="All 2 branches missed.">			if (listA != null) {</span>
<span class="nc" id="L1249">				resultList.addAll(listA);</span>
			}

<span class="nc bnc" id="L1252" title="All 2 branches missed.">			if (listB != null) {</span>
<span class="nc" id="L1253">				resultList.addAll(listB);</span>
			}
<span class="nc" id="L1255">			result.put(key, resultList);</span>
<span class="nc" id="L1256">			tempA.remove(key);</span>
<span class="nc" id="L1257">			tempB.remove(key);</span>
<span class="nc" id="L1258">		}</span>

<span class="nc" id="L1260">		it = tempB.iterator();</span>
<span class="nc bnc" id="L1261" title="All 2 branches missed.">		while (it.hasNext()) {</span>
<span class="nc" id="L1262">			String key = (String) it.next();</span>
<span class="nc" id="L1263">			List listB = (List) b.get(key);</span>
<span class="nc" id="L1264">			result.put(key, listB);</span>
<span class="nc" id="L1265">		}</span>
<span class="nc" id="L1266">		return result;</span>
	}

	public static Date toUtilDate(Timestamp reqArrivalTimeStamp) {
		//////TAG : LATER
<span class="nc" id="L1271">		return null;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>